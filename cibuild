#!/bin/bash

# script/server: produce jekyll site of the manual

set -e

cd "$(dirname "$0")/.."

# create new standard GH4D manual
mv book/SUMMARY_GH4D.md book/SUMMARY.md

echo "==> Building book"
gitbook build

echo "==> Generating PDF"
gitbook pdf . GH4D.pdf

mv _book/ GH4D/

mv book/SUMMARY.md book/SUMMARY_GH4D.md

# create new full CICD course for Travis
mv book/SUMMARY_CICD_FULLGH4D_TRAVIS.md book/SUMMARY.md

echo "==> Building book"
gitbook build

echo "==> Generating PDF"
gitbook pdf . fullCICDTravis.pdf

mv _book/ fullcicdtravis/

mv book/SUMMARY.md book/SUMMARY_CICD_FULLGH4D_TRAVIS.md

# create new full CICD course for Circle
mv book/SUMMARY_CICD_FULLGH4D_CIRCLE.md book/SUMMARY.md

echo "==> Building book"
gitbook build

echo "==> Generating PDF"
gitbook pdf . fullCICDCircle.pdf

mv _book/ fullcicdcircle/

mv book/SUMMARY.md book/SUMMARY_CICD_FULLGH4D_Circle.md

# create new condensed CICD course with Travis
mv book/SUMMARY_CICDONLY_TRAVIS.md book/SUMMARY.md

echo "==> Building book"
gitbook build


echo "==> Generating PDF"
gitbook pdf . onlyCICDTravis.pdf

mv _book/ onlycicdtravis/

mv book/SUMMARY.md book/SUMMARY_CICDONLY_TRAVIS.md

# create new condensed CICD course with Circle
mv book/SUMMARY_CICDONLY_CIRCLE.md book/SUMMARY.md

echo "==> Building book"
gitbook build


echo "==> Generating PDF"
gitbook pdf . onlyCICDCircle.pdf

mv _book/ onlycicdcircle/

mv book/SUMMARY.md book/SUMMARY_CICDONLY_CIRCLE.md


#bundle exec jekyll serve
